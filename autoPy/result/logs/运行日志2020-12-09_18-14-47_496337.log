2020-12-09 18:14:47.671 | INFO     | api.utils.ReadConfig:read_server_config:23 - http://dms-api.op.dianhun.cn:80
2020-12-09 18:14:47.671 | INFO     | api.utils.ReadConfig:read_response_reg:30 - 从响应中提取的token表达式：$.data
2020-12-09 18:14:47.676 | INFO     | api.utils.ReadData:get_response_data:34 - ('case_001', 'get请求实现登录', '/open/login/as', '写', 'get', 'params', '', '', '', '', '{"dhId": "wangyan","key":"666"}', '$.[message,code]', "['success', 0]", 'access_log:1|demand:1')
2020-12-09 18:14:47.676 | INFO     | api.utils.ReadData:get_response_data:34 - ('case_002', '部门管理分页查询', '/api/department/page-query', '读', 'get', 'params', '', '', '', '', '{"page": "0", "size": "20","query":"电梦网络测试组"}', '$.[message,code]', '{"message":"success","code":0 }', '')
2020-12-09 18:14:47.677 | INFO     | api.utils.OperateDB:__init__:20 - 载入数据库初始化配置信息：{'host': '127.0.0.1', 'port': 3306, 'user': 'root', 'passwd': '123456', 'db': 'dms'}
2020-12-09 18:14:47.679 | INFO     | TestApi:<module>:58 - 配置文件/excel数据/对象实例化，等前置条件处理完毕


2020-12-09 18:14:47.687 | DEBUG    | TestApi:test_main:92 - ***********...执行用例编号： case_001 ...***********
2020-12-09 18:14:47.687 | INFO     | api.utils.TreatingData:treating_data:31 - 处理依赖前data的数据:{"dhId": "wangyan","key":"666"}
2020-12-09 18:14:47.687 | INFO     | api.utils.TreatingData:treating_data:72 - data有数据，依赖无数据{'dhId': 'wangyan', 'key': '666'}
2020-12-09 18:14:47.687 | ERROR    | api.utils.TreatingData:treating_data:87 - 无法转换字典，进入下一个检查，本轮值不发生变化：['']，Expecting value: line 1 column 1 (char 0)
2020-12-09 18:14:47.688 | INFO     | api.utils.TreatingData:treating_data:108 - path路径参数解析依赖后的路径为
2020-12-09 18:14:47.727 | INFO     | api.comm.BaseRequest:base_requests:56 - 请求方法：get,请求路径：http://dms-api.op.dianhun.cn:80/open/login/as,请求参数：{'dhId': 'wangyan', 'key': '666'},请求文件：None,请求头:{}
2020-12-09 18:14:47.729 | INFO     | api.utils.SaveResponse:save_actual_response:28 - 当前字典数据{'case_001': {'message': 'success', 'code': 0, 'data': 'eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMTI5IiwiZXhwIjoxNjA3NTUyMDg5fQ.y7DoJQUwu_Z6tnUiqQfloD385YA750tW5ipslqvX80rhAfL09ud2kUoDWKApEHifaiQDjDD_OkOw15vlQhZsxw'}}
2020-12-09 18:14:47.734 | INFO     | TestApi:test_main:139 - 完整的json响应：{'message': 'success', 'code': 0, 'data': 'eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMTI5IiwiZXhwIjoxNjA3NTUyMDg5fQ.y7DoJQUwu_Z6tnUiqQfloD385YA750tW5ipslqvX80rhAfL09ud2kUoDWKApEHifaiQDjDD_OkOw15vlQhZsxw'}
需要校验的数据字典:['success', 0]预期校验的数据字典：['success', 0]
测试结果：False
2020-12-09 18:14:47.734 | DEBUG    | TestApi:test_main:140 - ********...用例编号：case_001,执行完毕，日志查看...********


2020-12-09 18:14:47.738 | INFO     | api.utils.ReadData:get_Db_data:52 - access_log(1.0, 'query', 'access_log', 'id,module', 'id=1', 1.0)
2020-12-09 18:14:47.738 | INFO     | TestApi:test_main:157 - 数据列表信息：[(1.0, 'query', 'access_log', 'id,module', 'id=1', 1.0)]

2020-12-09 18:14:47.739 | INFO     | api.utils.OperateDB:query_db:29 - 查询条件：access_log|id,module|id=1
2020-12-09 18:14:47.740 | INFO     | api.utils.OperateDB:query_db:42 - 查询数据库返回结果为：((1, '需求统计-统计用户需求花费工时(执行)'),)
2020-12-09 18:14:47.740 | INFO     | TestApi:test_db:169 - 返回结果数量:1
完整的数据库结果：((1, '需求统计-统计用户需求花费工时(执行)'),)
预期校验的数据字典：1.0
测试结果：True
2020-12-09 18:14:47.743 | INFO     | api.utils.ReadData:get_Db_data:52 - demand(1.0, 'query', 'demand', '', 'id = 100028', '')
2020-12-09 18:14:47.743 | INFO     | TestApi:test_main:157 - 数据列表信息：[(1.0, 'query', 'demand', '', 'id = 100028', '')]

2020-12-09 18:14:47.743 | INFO     | api.utils.OperateDB:query_db:29 - 查询条件：demand||id = 100028
2020-12-09 18:14:47.745 | INFO     | api.utils.OperateDB:query_db:42 - 查询数据库返回结果为：((100028, '测试需求', '<p>测试需求</p>', 1, datetime.datetime(2020, 10, 1, 12, 0, 3), None, 30, 'high', 'shencenwei', 82, 0, None, None, None, 0, '', 'shencenwei', 82, '运营开发部', '', '', 0, None, None, 10, 0, datetime.datetime(2020, 10, 20, 10, 36, 55), datetime.datetime(2020, 10, 20, 10, 43, 44)),)
2020-12-09 18:14:47.745 | INFO     | TestApi:test_db:169 - 返回结果数量:1
完整的数据库结果：((100028, '测试需求', '<p>测试需求</p>', 1, datetime.datetime(2020, 10, 1, 12, 0, 3), None, 30, 'high', 'shencenwei', 82, 0, None, None, None, 0, '', 'shencenwei', 82, '运营开发部', '', '', 0, None, None, 10, 0, datetime.datetime(2020, 10, 20, 10, 36, 55), datetime.datetime(2020, 10, 20, 10, 43, 44)),)
预期校验的数据字典：
测试结果：False
2020-12-09 18:14:47.767 | DEBUG    | TestApi:test_main:92 - ***********...执行用例编号： case_002 ...***********
2020-12-09 18:14:47.767 | INFO     | api.utils.TreatingData:treating_data:31 - 处理依赖前data的数据:{"page": "0", "size": "20","query":"电梦网络测试组"}
2020-12-09 18:14:47.767 | INFO     | api.utils.TreatingData:treating_data:72 - data有数据，依赖无数据{'page': '0', 'size': '20', 'query': '电梦网络测试组'}
2020-12-09 18:14:47.767 | ERROR    | api.utils.TreatingData:treating_data:87 - 无法转换字典，进入下一个检查，本轮值不发生变化：['']，Expecting value: line 1 column 1 (char 0)
2020-12-09 18:14:47.768 | INFO     | api.utils.TreatingData:treating_data:108 - path路径参数解析依赖后的路径为
2020-12-09 18:14:47.798 | INFO     | api.comm.BaseRequest:base_requests:56 - 请求方法：get,请求路径：http://dms-api.op.dianhun.cn:80/api/department/page-query,请求参数：{'page': '0', 'size': '20', 'query': '电梦网络测试组'},请求文件：None,请求头:{'Authorization': 'Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMTI5IiwiZXhwIjoxNjA3NTUyMDg5fQ.y7DoJQUwu_Z6tnUiqQfloD385YA750tW5ipslqvX80rhAfL09ud2kUoDWKApEHifaiQDjDD_OkOw15vlQhZsxw'}
2020-12-09 18:14:47.800 | INFO     | api.utils.SaveResponse:save_actual_response:28 - 当前字典数据{'case_001': {'message': 'success', 'code': 0, 'data': 'eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMTI5IiwiZXhwIjoxNjA3NTUyMDg5fQ.y7DoJQUwu_Z6tnUiqQfloD385YA750tW5ipslqvX80rhAfL09ud2kUoDWKApEHifaiQDjDD_OkOw15vlQhZsxw'}, 'case_002': {'message': 'success', 'code': 0, 'data': {'content': [{'id': 147, 'name': '电梦网络测试组', 'orgId': 265, 'orgType': 1, 'pid': 0, 'status': 0, 'pms': 'fangwei', 'adminUsers': 'zhujun,shencenwei', 'products': '5', 'productList': [{'id': 5, 'uniqId': 1330466377, 'enName': 'Omni Adventure', 'name': '放置旅团', 'icon': 'https://open.17m3.com/uploadfiles/developer/2019/07/26/20190726162608.png', 'status': 1, 'createdAt': '1999-01-01 00:00:00', 'updatedAt': '2020-10-20 11:18:26'}], 'adminUserList': [{'id': 78, 'dhId': 'shencenwei', 'name': '沈岑伟', 'admin': 0, 'superAdmin': True, 'deptAdmin': False, 'companyId': 5, 'status': None, 'createdAt': '2020-10-20 10:28:27', 'updatedAt': '2020-12-09 00:00:23', 'department': {'id': 82, 'name': '运营开发部', 'orgId': 512, 'orgType': 3, 'pid': 509, 'status': 1, 'pms': 'anita,shencenwei', 'adminUsers': 'anita,fisn', 'products': '1,2,3', 'productList': None, 'adminUserList': None, 'pmsList': None, 'demandTypes': None, 'projects': None, 'createdAt': '2020-10-20 10:28:26', 'updatedAt': '2020-12-01 16:35:44'}}, {'id': 767, 'dhId': 'zhujun', 'name': '朱军', 'admin': 0, 'superAdmin': True, 'deptAdmin': True, 'companyId': 6, 'status': None, 'createdAt': '2020-10-20 14:39:29', 'updatedAt': '2020-10-20 14:39:29', 'department': {'id': 147, 'name': '电梦网络测试组', 'orgId': 265, 'orgType': 1, 'pid': 0, 'status': 0, 'pms': 'fangwei', 'adminUsers': 'zhujun,shencenwei', 'products': '5', 'productList': None, 'adminUserList': None, 'pmsList': None, 'demandTypes': None, 'projects': None, 'createdAt': '2020-10-20 14:39:26', 'updatedAt': '2020-11-21 00:00:06'}}], 'pmsList': [{'id': 787, 'dhId': 'fangwei', 'name': '方伟', 'admin': 0, 'superAdmin': False, 'deptAdmin': False, 'companyId': 6, 'status': None, 'createdAt': '2020-10-20 14:39:29', 'updatedAt': '2020-10-20 14:39:29', 'department': {'id': 147, 'name': '电梦网络测试组', 'orgId': 265, 'orgType': 1, 'pid': 0, 'status': 0, 'pms': 'fangwei', 'adminUsers': 'zhujun,shencenwei', 'products': '5', 'productList': None, 'adminUserList': None, 'pmsList': None, 'demandTypes': None, 'projects': None, 'createdAt': '2020-10-20 14:39:26', 'updatedAt': '2020-11-21 00:00:06'}}], 'demandTypes': [{'id': 37, 'name': '系统'}, {'id': 46, 'name': '设计'}, {'id': 44, 'name': '网站'}, {'id': 45, 'name': '测试'}], 'projects': [{'id': 20087261, 'name': '野蛮人大作战'}, {'id': 20108871, 'name': '游戏引入评测'}], 'createdAt': '2020-10-20 14:39:26', 'updatedAt': '2020-11-21 00:00:06'}], 'page': 0, 'size': 20, 'total': 1}}}
2020-12-09 18:14:47.805 | INFO     | TestApi:test_main:139 - 完整的json响应：{'message': 'success', 'code': 0, 'data': {'content': [{'id': 147, 'name': '电梦网络测试组', 'orgId': 265, 'orgType': 1, 'pid': 0, 'status': 0, 'pms': 'fangwei', 'adminUsers': 'zhujun,shencenwei', 'products': '5', 'productList': [{'id': 5, 'uniqId': 1330466377, 'enName': 'Omni Adventure', 'name': '放置旅团', 'icon': 'https://open.17m3.com/uploadfiles/developer/2019/07/26/20190726162608.png', 'status': 1, 'createdAt': '1999-01-01 00:00:00', 'updatedAt': '2020-10-20 11:18:26'}], 'adminUserList': [{'id': 78, 'dhId': 'shencenwei', 'name': '沈岑伟', 'admin': 0, 'superAdmin': True, 'deptAdmin': False, 'companyId': 5, 'status': None, 'createdAt': '2020-10-20 10:28:27', 'updatedAt': '2020-12-09 00:00:23', 'department': {'id': 82, 'name': '运营开发部', 'orgId': 512, 'orgType': 3, 'pid': 509, 'status': 1, 'pms': 'anita,shencenwei', 'adminUsers': 'anita,fisn', 'products': '1,2,3', 'productList': None, 'adminUserList': None, 'pmsList': None, 'demandTypes': None, 'projects': None, 'createdAt': '2020-10-20 10:28:26', 'updatedAt': '2020-12-01 16:35:44'}}, {'id': 767, 'dhId': 'zhujun', 'name': '朱军', 'admin': 0, 'superAdmin': True, 'deptAdmin': True, 'companyId': 6, 'status': None, 'createdAt': '2020-10-20 14:39:29', 'updatedAt': '2020-10-20 14:39:29', 'department': {'id': 147, 'name': '电梦网络测试组', 'orgId': 265, 'orgType': 1, 'pid': 0, 'status': 0, 'pms': 'fangwei', 'adminUsers': 'zhujun,shencenwei', 'products': '5', 'productList': None, 'adminUserList': None, 'pmsList': None, 'demandTypes': None, 'projects': None, 'createdAt': '2020-10-20 14:39:26', 'updatedAt': '2020-11-21 00:00:06'}}], 'pmsList': [{'id': 787, 'dhId': 'fangwei', 'name': '方伟', 'admin': 0, 'superAdmin': False, 'deptAdmin': False, 'companyId': 6, 'status': None, 'createdAt': '2020-10-20 14:39:29', 'updatedAt': '2020-10-20 14:39:29', 'department': {'id': 147, 'name': '电梦网络测试组', 'orgId': 265, 'orgType': 1, 'pid': 0, 'status': 0, 'pms': 'fangwei', 'adminUsers': 'zhujun,shencenwei', 'products': '5', 'productList': None, 'adminUserList': None, 'pmsList': None, 'demandTypes': None, 'projects': None, 'createdAt': '2020-10-20 14:39:26', 'updatedAt': '2020-11-21 00:00:06'}}], 'demandTypes': [{'id': 37, 'name': '系统'}, {'id': 46, 'name': '设计'}, {'id': 44, 'name': '网站'}, {'id': 45, 'name': '测试'}], 'projects': [{'id': 20087261, 'name': '野蛮人大作战'}, {'id': 20108871, 'name': '游戏引入评测'}], 'createdAt': '2020-10-20 14:39:26', 'updatedAt': '2020-11-21 00:00:06'}], 'page': 0, 'size': 20, 'total': 1}}
需要校验的数据字典:['success', 0]预期校验的数据字典：{"message":"success","code":0 }
测试结果：False
2020-12-09 18:14:47.805 | DEBUG    | TestApi:test_main:140 - ********...用例编号：case_002,执行完毕，日志查看...********


2020-12-09 18:14:47.807 | INFO     | TestApi:test_main:163 - 没有添加数据库数据校验
2020-12-09 18:14:59.996 | WARNING  | __main__:runTest:79 - 报告已生成
